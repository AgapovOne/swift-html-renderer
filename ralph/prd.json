{
  "project": "SwiftHTMLRenderer",
  "branchName": "ralph/v1-release",
  "description": "v1.0.0 Release — поддержка <img>, базовый accessibility, README для публикации",
  "userStories": [
    {
      "id": "US-001",
      "title": "Дефолтный рендеринг <img> через AsyncImage",
      "description": "Как пользователь библиотеки, я хочу чтобы <img> рендерился из коробки через AsyncImage.",
      "acceptanceCriteria": [
        "<img src='https://...'> рендерится через SwiftUI AsyncImage",
        "Во время загрузки — ProgressView как placeholder",
        "При ошибке загрузки — системная иконка (exclamationmark.triangle)",
        "Атрибут alt используется как accessibilityLabel",
        "Атрибуты width и height задают размер через .frame() (если указаны оба)",
        "Если width/height не указаны — картинка .scaledToFit() по доступной ширине",
        "Невалидный src (не URL) — состояние ошибки",
        "Пустой src или отсутствие src — EmptyView()",
        "<img> внутри <figure> рендерится корректно",
        "<img> ломает inline collapsing — добавить 'img' в проверку canCollapseInline",
        "swift build собирается без ошибок",
        "swift test проходит"
      ],
      "priority": 1,
      "passes": false,
      "notes": "img — блочный в контексте рендеринга. canCollapseInline возвращает false если встречает img среди детей."
    },
    {
      "id": "US-002",
      "title": "Кастомный рендеринг <img> через ViewBuilder",
      "description": "Как пользователь библиотеки, я хочу подставить свой загрузчик картинок (Kingfisher, SDWebImage), чтобы контролировать загрузку и кеширование.",
      "acceptanceCriteria": [
        "Новый HTMLImageRenderer компонент для @HTMLContentBuilder",
        "Closure получает src: String?, alt: String?, attributes: [String: String]",
        "Если задан кастомный renderer — AsyncImage не используется",
        "Приоритет: ViewBuilder > дефолтный AsyncImage",
        "HTMLCustomRenderers получает поле image",
        "swift build собирается без ошибок",
        "swift test проходит"
      ],
      "priority": 2,
      "passes": false,
      "notes": "Паттерн аналогичен HTMLParagraphRenderer, HTMLLinkRenderer и другим компонентам HTMLContentBuilder."
    },
    {
      "id": "US-003",
      "title": "HTMLImageStyle в HTMLStyleConfiguration",
      "description": "Как пользователь библиотеки, я хочу настраивать стили картинок через конфиг без кастомного ViewBuilder.",
      "acceptanceCriteria": [
        "Новая структура HTMLImageStyle: contentMode (ContentMode?), cornerRadius (CGFloat?), maxHeight (CGFloat?), placeholderColor (Color?)",
        "В HTMLStyleConfiguration добавлено поле image: HTMLImageStyle",
        "Дефолтный рендерер <img> применяет стили из конфига",
        "Дефолтные значения: contentMode = .fit, остальное nil",
        "swift build собирается без ошибок",
        "swift test проходит"
      ],
      "priority": 3,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-004",
      "title": "Тесты для <img>",
      "description": "Как разработчик библиотеки, я хочу покрыть рендеринг картинок тестами.",
      "acceptanceCriteria": [
        "Тест: <img src='https://example.com/img.png'> — view создаётся без краша",
        "Тест: <img> без src — рендерится EmptyView",
        "Тест: <img src='https://example.com/img.png' alt='Photo'> — view с alt",
        "Тест: <img src='https://example.com/img.png' width='100' height='50'> — view с размерами",
        "Тест: <figure><img src='https://example.com/img.png'><figcaption>Caption</figcaption></figure> — img внутри figure",
        "Тест: <p>text <img src='x'> more</p> — img ломает inline collapsing, fallback на separate views",
        "swift test проходит"
      ],
      "priority": 4,
      "passes": false,
      "notes": "Sociable-паттерн: HTMLView(html:) → view создаётся без краша. @MainActor @Test обязательно."
    },
    {
      "id": "US-005",
      "title": "Accessibility — headings, images, links",
      "description": "Как пользователь с VoiceOver, я хочу чтобы заголовки, картинки и ссылки были доступны.",
      "acceptanceCriteria": [
        "h1-h6 получают .accessibilityAddTraits(.isHeader)",
        "<img> с alt получает .accessibilityLabel(alt)",
        "<img> без alt получает .accessibilityHidden(true)",
        "<a> с onLinkTap получает .accessibilityAddTraits(.isLink)",
        "Accessibility-модификаторы не ломают inline collapsing (применяются к контейнеру, не к Text)",
        "swift build собирается без ошибок",
        "swift test проходит"
      ],
      "priority": 5,
      "passes": false,
      "notes": "Traits применяются через ViewModifier к элементу-контейнеру. Для h1-h6 — к результату applyStyle. Для <a> — к Button или стилизованному тексту."
    },
    {
      "id": "US-006",
      "title": "README для публикации",
      "description": "Как разработчик, нашедший библиотеку на GitHub, я хочу быстро понять что она делает и как использовать.",
      "acceptanceCriteria": [
        "Секция 'What it does' — Parser + Renderer кратко",
        "Секция 'Install' — SPM dependency с обоими модулями (HTMLParser, HTMLRenderer)",
        "Секция 'Quick Start' — минимальный HTMLView пример (3-5 строк)",
        "Секция 'Customization' — примеры трёх уровней: StyleConfiguration, ViewBuilder, Visitor",
        "Секция 'Supported Elements' — таблица элементов",
        "Секция 'Image Support' — дефолтный и кастомный рендеринг img",
        "Секция 'Links' — пример onLinkTap",
        "Секция 'Parser Only' — пример HTMLParser без Renderer",
        "Секция 'Requirements' — iOS 17+, Swift 6.2, SPM",
        "README на английском языке",
        "swift build собирается без ошибок"
      ],
      "priority": 6,
      "passes": false,
      "notes": "Текущий README покрывает только Parser. Нужно переписать с нуля, добавив Renderer, кастомизацию и img."
    }
  ]
}
