## Codebase Patterns
- HTMLView: 4 init variants (document/html × with/without @HTMLContentBuilder) — US-002 удалит html-варианты, останутся 2
- HTMLStyleConfiguration: 21 element style slots + 4 layout values + static .default preset
- HTMLElementStyle: font, foregroundColor, backgroundColor, padding, lineSpacing, cornerRadius, borderColor, borderWidth (all optional)
- HTMLCustomRenderers: 9 closure slots + tagRenderers dict. All closures return AnyView
- ElementRenderer: internal View, monolithic switch on tagName (230+ строк, 40+ cases)
- InlineTextBuilder: canCollapseInline() checks phrasingTags, buildInlineText() concatenates Text views
- applyStyle(): extension on View, applies HTMLElementStyle properties with skip* flags
- Environment keys: onLinkTap (URL, HTMLElement), onUnknownElement, styleConfiguration, customRenderers
- Tests: 90 total (22 parser + 65 renderer + 3 visitor), sociable tests through public API
- Swift 6.2, strict concurrency, iOS 17+, SPM only
- InlineTextBuilder uses deprecated foregroundColor() — US-001 fixes this
- canCollapseInline pattern repeated 8 times in ElementRenderer — US-005 extracts helper

---

